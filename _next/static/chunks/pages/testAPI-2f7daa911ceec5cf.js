(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[953],{1372:function(t,e,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/testAPI",function(){return n(2539)}])},2539:function(t,e,n){"use strict";n.r(e);var r=n(4051),o=n.n(r),a=n(5893),i=n(7294);function u(t,e,n,r,o,a,i){try{var u=t[a](i),s=u.value}catch(c){return void n(c)}u.done?e(s):Promise.resolve(s).then(r,o)}function s(t){return function(){var e=this,n=arguments;return new Promise((function(r,o){var a=t.apply(e,n);function i(t){u(a,r,o,i,s,"next",t)}function s(t){u(a,r,o,i,s,"throw",t)}i(void 0)}))}}e.default=function(){var t=function(t){var e;return t.results.map((function(t){return{deadline:null!==(e=t.deadline)&&void 0!==e?e:"Udefinert",fromYear:0,toYear:0,jobType:t.employment.name,title:t.title,companyName:t.company.name,url:"https://online.ntnu.no/career/".concat(t.id),workplace:t.location.map((function(t){return t.name})).toString()}}))},e=function(t){return t.results.map((function(t){return{deadline:t.deadline,fromYear:t.fromYear,toYear:t.toYear,jobType:t.jobType,title:t.title,companyName:t.company.name,url:"https://abakus.no/joblistings/"+t.id+"/",workplace:t.workplaces.map((function(t){return t.town})).toString()}}))},n=function(t){var e={FULL_TIME:"full_time",PART_TIME:"part_time"};return t.results.map((function(t){return{deadline:t.deadline,fromYear:t.class_start,toYear:t.class_end,jobType:e[t.jobType],title:t.title,company:t.company,url:"https://tihlde.org/karriere/"+t.id+"/",workplace:t.location}}))};function r(t,e){return u.apply(this,arguments)}function u(){return(u=s(o().mark((function t(e,n){return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",fetch(e).then(function(){var t=s(o().mark((function t(e){var r;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.json();case 2:return r=t.sent,t.abrupt("return",n(r));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()));case 1:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var c=(0,i.useState)([]),l=c[0],p=c[1];return(0,i.useEffect)((function(){var o=localStorage.getItem("jobListings"),a=localStorage.getItem("jobListingCacheDate");if(o&&o.length>0&&parseInt(a)>Date.now()-86400)p(JSON.parse(localStorage.getItem("jobListings")));else{localStorage.removeItem("jobListings");var i=r("https://lego.abakus.no/api/v1/joblistings/",e),u=r("https://old.online.ntnu.no/api/v1/career/",t),s=r("https://api.tihlde.org/jobposts/",n);Promise.all([i,u,s]).then((function(t){var e=t.flat();p(e),localStorage.setItem("jobListings",JSON.stringify(e)),localStorage.setItem("jobListingCacheDate",Date.now())}))}}),[]),(0,a.jsx)("div",{children:JSON.stringify(l)})}}},function(t){t.O(0,[774,888,179],(function(){return e=1372,t(t.s=e);var e}));var e=t.O();_N_E=e}]);